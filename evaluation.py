import pandas as pd
from nlgeval import NLGEval

if __name__ == '__main__':
    df = pd.read_csv('predicted_supporting_facts1.csv')
    ref = df["question"].tolist()
    hyp = df["predicted"].tolist()

    n = NLGEval(metrics_to_omit=["CIDEr", "SkipThoughtCS",
                "EmbeddingAverageCosineSimilarity", "VectorExtremaCosineSimilarity", "GreedyMatchingScore"])

    # scores = n.compute_metrics(ref_list=[
    #     [
    #         "this is one reference sentence for sentence1",
    #         "this is a reference sentence for sentence2 which was generated by your model"
    #     ],
    #     [
    #         "this is one more reference sentence for sentence1",
    #         "this is the second reference sentence for sentence2"
    #     ],
    # ],
    #     hyp_list=[
    #         "this is the model generated sentence1 which seems good enough",
    #         "this is sentence2 which has been generated by your model"
    # ]
    # )

    # print(scores)

    # ref = ref[:1000]
    # hyp = hyp[:1000]

    scores = n.compute_metrics(ref_list=[ref], hyp_list=hyp)

    scores['Bleu_mean_eq_weight'] = (scores['Bleu_1'] + \
        scores['Bleu_2'] + scores['Bleu_3'] + scores['Bleu_4']) / 4.0

    print(scores)
